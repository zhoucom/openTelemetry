        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
        at java.base/java.lang.Thread.run(Thread.java:840)
[otel.javaagent 2025-12-18 22:14:36:822 +0800] [http-nio-8081-exec-2] INFO io.opentelemetry.exporter.logging.LoggingSpanExporter - 'GET /api/a/error' : 9885bbe93d794644540267d99afbe115 28478bfef6c61825 SERVER [tracer: io.opentelemetry.tomcat-10.0:2.23.0-alpha] AttributesMap{data={network.peer.port=61266, url.path=/api/a/error, error.type=500, network.peer.address=0:0:0:0:0:0:0:1, server.address=localhost, client.address=0:0:0:0:0:0:0:1, http.route=/api/a/error, http.request.method=GET, server.port=8081, thread.id=27, url.scheme=http, thread.name=http-nio-8081-exec-2, http.response.status_code=500, user_agent.original=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36, network.protocol.version=1.1}, capacity=128, totalAddedValues=15}
2025-12-18 22:18:23.502 [http-nio-8081-exec-3] INFO  com.example.servicea.controller.DemoController - traceId=a806cd96e2ba890e5e04646b885d67ae spanId=8f3d1adb2a034ab1 - [A] 收到 /success 请求，准备调用 B 成功接口
[otel.javaagent 2025-12-18 22:18:23:508 +0800] [http-nio-8081-exec-3] INFO io.opentelemetry.exporter.logging.LoggingSpanExporter - 'GET' : a806cd96e2ba890e5e04646b885d67ae 3aba92b67a28b75d CLIENT [tracer: io.opentelemetry.http-url-connection:2.23.0-alpha] AttributesMap{data={server.port=8082, thread.id=28, url.full=http://localhost:8082/api/b/success, thread.name=http-nio-8081-exec-3, http.response.status_code=200, server.address=localhost, network.protocol.version=1.1, http.request.method=GET}, capacity=128, totalAddedValues=8}
2025-12-18 22:18:23.509 [http-nio-8081-exec-3] INFO  com.example.servicea.controller.DemoController - traceId=a806cd96e2ba890e5e04646b885d67ae spanId=8f3d1adb2a034ab1 - [A] B 成功返回，响应内容: Service B success
[otel.javaagent 2025-12-18 22:18:23:511 +0800] [http-nio-8081-exec-3] INFO io.opentelemetry.exporter.logging.LoggingSpanExporter - 'GET /api/a/success' : a806cd96e2ba890e5e04646b885d67ae 68b180bd34142f09 SERVER [tracer: io.opentelemetry.tomcat-10.0:2.23.0-alpha] AttributesMap{data={network.peer.port=62380, url.path=/api/a/success, network.peer.address=0:0:0:0:0:0:0:1, server.address=localhost, client.address=0:0:0:0:0:0:0:1, http.route=/api/a/success, http.request.method=GET, server.port=8081, thread.id=28, url.scheme=http, thread.name=http-nio-8081-exec-3, http.response.status_code=200, user_agent.original=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36, network.protocol.version=1.1}, capacity=128, totalAddedValues=14}
2025-12-18 22:18:26.275 [http-nio-8081-exec-4] INFO  com.example.servicea.controller.DemoController - traceId=c3cded3cbb1619810bf692edfe485a44 spanId=f11263c8b03c1985 - [A] 收到 /error 请求，准备调用 B 错误接口
[otel.javaagent 2025-12-18 22:18:26:282 +0800] [http-nio-8081-exec-4] INFO io.opentelemetry.exporter.logging.LoggingSpanExporter - 'GET' : c3cded3cbb1619810bf692edfe485a44 35f44f3836f21995 CLIENT [tracer: io.opentelemetry.http-url-connection:2.23.0-alpha] AttributesMap{data={server.port=8082, thread.id=29, url.full=http://localhost:8082/api/b/error, thread.name=http-nio-8081-exec-4, http.response.status_code=500, error.type=500, server.address=localhost, network.protocol.version=1.1, http.request.method=GET}, capacity=128, totalAddedValues=9}
2025-12-18 22:18:26.284 [http-nio-8081-exec-4] ERROR com.example.servicea.controller.DemoController - traceId=c3cded3cbb1619810bf692edfe485a44 spanId=f11263c8b03c1985 - [A] 调用 B /error 接口发生异常，将错误返回给前端
org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 : "{"timestamp":"2025-12-18T14:18:26.281+00:00","status":500,"error":"Internal Server Error","path":"/api/b/error"}"
        at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102)
        at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:186)
        at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)
        at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
        at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:942)
        at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:891)
        at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:790)
        at org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:404)
        at com.example.servicea.controller.DemoController.error(DemoController.java:37)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:569)
        at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
        at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
        at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
        at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
        at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at com.example.servicea.filter.TraceparentEchoFilter.doFilter(TraceparentEchoFilter.java:45)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.springframework.web.servlet.v6_0.OpenTelemetryHandlerMappingFilter.doFilter(OpenTelemetryHandlerMappingFilter.java:78)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
        at java.base/java.lang.Thread.run(Thread.java:840)
[otel.javaagent 2025-12-18 22:18:26:288 +0800] [http-nio-8081-exec-4] INFO io.opentelemetry.exporter.logging.LoggingSpanExporter - 'GET /api/a/error' : c3cded3cbb1619810bf692edfe485a44 2ba6172006f120c5 SERVER [tracer: io.opentelemetry.tomcat-10.0:2.23.0-alpha] AttributesMap{data={network.peer.port=62380, url.path=/api/a/error, error.type=500, network.peer.address=0:0:0:0:0:0:0:1, server.address=localhost, client.address=0:0:0:0:0:0:0:1, http.route=/api/a/error, http.request.method=GET, server.port=8081, thread.id=29, url.scheme=http, thread.name=http-nio-8081-exec-4, http.response.status_code=500, user_agent.original=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36, network.protocol.version=1.1}, capacity=128, totalAddedValues=15}
2025-12-18 22:19:07.611 [http-nio-8081-exec-5] INFO  com.example.servicea.controller.DemoController - traceId=0c6fd08664a6058eb3d5ed0c9d227dea spanId=85475abe28554346 - [A] 收到 /success 请求，准备调用 B 成功接口
[otel.javaagent 2025-12-18 22:19:07:616 +0800] [http-nio-8081-exec-5] INFO io.opentelemetry.exporter.logging.LoggingSpanExporter - 'GET' : 0c6fd08664a6058eb3d5ed0c9d227dea c2943555653ba0c1 CLIENT [tracer: io.opentelemetry.http-url-connection:2.23.0-alpha] AttributesMap{data={server.port=8082, thread.id=30, url.full=http://localhost:8082/api/b/success, thread.name=http-nio-8081-exec-5, http.response.status_code=200, server.address=localhost, network.protocol.version=1.1, http.request.method=GET}, capacity=128, totalAddedValues=8}
2025-12-18 22:19:07.617 [http-nio-8081-exec-5] INFO  com.example.servicea.controller.DemoController - traceId=0c6fd08664a6058eb3d5ed0c9d227dea spanId=85475abe28554346 - [A] B 成功返回，响应内容: Service B success
[otel.javaagent 2025-12-18 22:19:07:619 +0800] [http-nio-8081-exec-5] INFO io.opentelemetry.exporter.logging.LoggingSpanExporter - 'GET /api/a/success' : 0c6fd08664a6058eb3d5ed0c9d227dea 9e14f6b2b877efed SERVER [tracer: io.opentelemetry.tomcat-10.0:2.23.0-alpha] AttributesMap{data={network.peer.port=62605, url.path=/api/a/success, network.peer.address=0:0:0:0:0:0:0:1, server.address=localhost, client.address=0:0:0:0:0:0:0:1, http.route=/api/a/success, http.request.method=GET, server.port=8081, thread.id=30, url.scheme=http, thread.name=http-nio-8081-exec-5, http.response.status_code=200, user_agent.original=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36, network.protocol.version=1.1}, capacity=128, totalAddedValues=14}
2025-12-18 22:19:08.229 [http-nio-8081-exec-6] INFO  com.example.servicea.controller.DemoController - traceId=5d7a956c050e024ba1779360d34c8ccf spanId=40a46f2533cc9b26 - [A] 收到 /error 请求，准备调用 B 错误接口
[otel.javaagent 2025-12-18 22:19:08:234 +0800] [http-nio-8081-exec-6] INFO io.opentelemetry.exporter.logging.LoggingSpanExporter - 'GET' : 5d7a956c050e024ba1779360d34c8ccf c79451cf3317e289 CLIENT [tracer: io.opentelemetry.http-url-connection:2.23.0-alpha] AttributesMap{data={server.port=8082, thread.id=31, url.full=http://localhost:8082/api/b/error, thread.name=http-nio-8081-exec-6, http.response.status_code=500, error.type=500, server.address=localhost, network.protocol.version=1.1, http.request.method=GET}, capacity=128, totalAddedValues=9}
2025-12-18 22:19:08.235 [http-nio-8081-exec-6] ERROR com.example.servicea.controller.DemoController - traceId=5d7a956c050e024ba1779360d34c8ccf spanId=40a46f2533cc9b26 - [A] 调用 B /error 接口发生异常，将错误返回给前端
org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 : "{"timestamp":"2025-12-18T14:19:08.233+00:00","status":500,"error":"Internal Server Error","path":"/api/b/error"}"
        at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102)
        at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:186)
        at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)
        at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
        at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:942)
        at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:891)
        at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:790)
        at org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:404)
        at com.example.servicea.controller.DemoController.error(DemoController.java:37)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:569)
        at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
        at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
        at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
        at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
        at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at com.example.servicea.filter.TraceparentEchoFilter.doFilter(TraceparentEchoFilter.java:45)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.springframework.web.servlet.v6_0.OpenTelemetryHandlerMappingFilter.doFilter(OpenTelemetryHandlerMappingFilter.java:78)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
        at java.base/java.lang.Thread.run(Thread.java:840)
[otel.javaagent 2025-12-18 22:19:08:237 +0800] [http-nio-8081-exec-6] INFO io.opentelemetry.exporter.logging.LoggingSpanExporter - 'GET /api/a/error' : 5d7a956c050e024ba1779360d34c8ccf 69473e8fed8dd0f4 SERVER [tracer: io.opentelemetry.tomcat-10.0:2.23.0-alpha] AttributesMap{data={network.peer.port=62605, url.path=/api/a/error, error.type=500, network.peer.address=0:0:0:0:0:0:0:1, server.address=localhost, client.address=0:0:0:0:0:0:0:1, http.route=/api/a/error, http.request.method=GET, server.port=8081, thread.id=31, url.scheme=http, thread.name=http-nio-8081-exec-6, http.response.status_code=500, user_agent.original=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36, network.protocol.version=1.1}, capacity=128, totalAddedValues=15}
2025-12-18 22:20:42.786 [http-nio-8081-exec-7] INFO  com.example.servicea.controller.DemoController - traceId=54023e0f381e338b7a7994275bccad0e spanId=382ee07c51510db7 - [A] 收到 /success 请求，准备调用 B 成功接口
[otel.javaagent 2025-12-18 22:20:42:791 +0800] [http-nio-8081-exec-7] INFO io.opentelemetry.exporter.logging.LoggingSpanExporter - 'GET' : 54023e0f381e338b7a7994275bccad0e 997fcd7ea185858f CLIENT [tracer: io.opentelemetry.http-url-connection:2.23.0-alpha] AttributesMap{data={server.port=8082, thread.id=32, url.full=http://localhost:8082/api/b/success, thread.name=http-nio-8081-exec-7, http.response.status_code=200, server.address=localhost, network.protocol.version=1.1, http.request.method=GET}, capacity=128, totalAddedValues=8}
2025-12-18 22:20:42.792 [http-nio-8081-exec-7] INFO  com.example.servicea.controller.DemoController - traceId=54023e0f381e338b7a7994275bccad0e spanId=382ee07c51510db7 - [A] B 成功返回，响应内容: Service B success
[otel.javaagent 2025-12-18 22:20:42:793 +0800] [http-nio-8081-exec-7] INFO io.opentelemetry.exporter.logging.LoggingSpanExporter - 'GET /api/a/success' : 54023e0f381e338b7a7994275bccad0e 53b26264c10c9c62 SERVER [tracer: io.opentelemetry.tomcat-10.0:2.23.0-alpha] AttributesMap{data={network.peer.port=63101, url.path=/api/a/success, network.peer.address=0:0:0:0:0:0:0:1, server.address=localhost, client.address=0:0:0:0:0:0:0:1, http.route=/api/a/success, http.request.method=GET, server.port=8081, thread.id=32, url.scheme=http, thread.name=http-nio-8081-exec-7, http.response.status_code=200, user_agent.original=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36, network.protocol.version=1.1}, capacity=128, totalAddedValues=14}
2025-12-18 22:20:43.280 [http-nio-8081-exec-8] INFO  com.example.servicea.controller.DemoController - traceId=bff46b0003b708f1db6e277b3a9423ed spanId=90b93546aa7c4d97 - [A] 收到 /error 请求，准备调用 B 错误接口
[otel.javaagent 2025-12-18 22:20:43:285 +0800] [http-nio-8081-exec-8] INFO io.opentelemetry.exporter.logging.LoggingSpanExporter - 'GET' : bff46b0003b708f1db6e277b3a9423ed 867cf19a34f5f252 CLIENT [tracer: io.opentelemetry.http-url-connection:2.23.0-alpha] AttributesMap{data={server.port=8082, thread.id=33, url.full=http://localhost:8082/api/b/error, thread.name=http-nio-8081-exec-8, http.response.status_code=500, error.type=500, server.address=localhost, network.protocol.version=1.1, http.request.method=GET}, capacity=128, totalAddedValues=9}
2025-12-18 22:20:43.286 [http-nio-8081-exec-8] ERROR com.example.servicea.controller.DemoController - traceId=bff46b0003b708f1db6e277b3a9423ed spanId=90b93546aa7c4d97 - [A] 调用 B /error 接口发生异常，将错误返回给前端
org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 : "{"timestamp":"2025-12-18T14:20:43.284+00:00","status":500,"error":"Internal Server Error","path":"/api/b/error"}"
        at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102)
        at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:186)
        at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)
        at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
        at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:942)
        at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:891)
        at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:790)
        at org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:404)
        at com.example.servicea.controller.DemoController.error(DemoController.java:37)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:569)
        at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
        at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
        at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
        at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
        at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at com.example.servicea.filter.TraceparentEchoFilter.doFilter(TraceparentEchoFilter.java:45)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.springframework.web.servlet.v6_0.OpenTelemetryHandlerMappingFilter.doFilter(OpenTelemetryHandlerMappingFilter.java:78)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
        at java.base/java.lang.Thread.run(Thread.java:840)
[otel.javaagent 2025-12-18 22:20:43:288 +0800] [http-nio-8081-exec-8] INFO io.opentelemetry.exporter.logging.LoggingSpanExporter - 'GET /api/a/error' : bff46b0003b708f1db6e277b3a9423ed 735887ad0d386f58 SERVER [tracer: io.opentelemetry.tomcat-10.0:2.23.0-alpha] AttributesMap{data={network.peer.port=63101, url.path=/api/a/error, error.type=500, network.peer.address=0:0:0:0:0:0:0:1, server.address=localhost, client.address=0:0:0:0:0:0:0:1, http.route=/api/a/error, http.request.method=GET, server.port=8081, thread.id=33, url.scheme=http, thread.name=http-nio-8081-exec-8, http.response.status_code=500, user_agent.original=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36, network.protocol.version=1.1}, capacity=128, totalAddedValues=15}
2025-12-18 22:24:06.107 [http-nio-8081-exec-9] INFO  com.example.servicea.controller.DemoController - traceId=d59385e2186e0db5c0a2a1af02bfcb45 spanId=c3da6febf7071e41 - [A] 收到 /success 请求，准备调用 B 成功接口
[otel.javaagent 2025-12-18 22:24:06:111 +0800] [http-nio-8081-exec-9] INFO io.opentelemetry.exporter.logging.LoggingSpanExporter - 'GET' : d59385e2186e0db5c0a2a1af02bfcb45 822d1c763ecad366 CLIENT [tracer: io.opentelemetry.http-url-connection:2.23.0-alpha] AttributesMap{data={server.port=8082, thread.id=34, url.full=http://localhost:8082/api/b/success, thread.name=http-nio-8081-exec-9, http.response.status_code=200, server.address=localhost, network.protocol.version=1.1, http.request.method=GET}, capacity=128, totalAddedValues=8}
2025-12-18 22:24:06.112 [http-nio-8081-exec-9] INFO  com.example.servicea.controller.DemoController - traceId=d59385e2186e0db5c0a2a1af02bfcb45 spanId=c3da6febf7071e41 - [A] B 成功返回，响应内容: Service B success
[otel.javaagent 2025-12-18 22:24:06:114 +0800] [http-nio-8081-exec-9] INFO io.opentelemetry.exporter.logging.LoggingSpanExporter - 'GET /api/a/success' : d59385e2186e0db5c0a2a1af02bfcb45 6e25f584757e2930 SERVER [tracer: io.opentelemetry.tomcat-10.0:2.23.0-alpha] AttributesMap{data={network.peer.port=64058, url.path=/api/a/success, network.peer.address=0:0:0:0:0:0:0:1, server.address=localhost, client.address=0:0:0:0:0:0:0:1, http.route=/api/a/success, http.request.method=GET, server.port=8081, thread.id=34, url.scheme=http, thread.name=http-nio-8081-exec-9, http.response.status_code=200, user_agent.original=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36, network.protocol.version=1.1}, capacity=128, totalAddedValues=14}
2025-12-18 22:24:06.728 [http-nio-8081-exec-10] INFO  com.example.servicea.controller.DemoController - traceId=51c0223e1c2dc7333abb41c1628dcd6d spanId=7a978735a10dfd86 - [A] 收到 /error 请求，准备调用 B 错误接口
[otel.javaagent 2025-12-18 22:24:06:732 +0800] [http-nio-8081-exec-10] INFO io.opentelemetry.exporter.logging.LoggingSpanExporter - 'GET' : 51c0223e1c2dc7333abb41c1628dcd6d 213b91b0383f21e2 CLIENT [tracer: io.opentelemetry.http-url-connection:2.23.0-alpha] AttributesMap{data={server.port=8082, thread.id=35, url.full=http://localhost:8082/api/b/error, thread.name=http-nio-8081-exec-10, http.response.status_code=500, error.type=500, server.address=localhost, network.protocol.version=1.1, http.request.method=GET}, capacity=128, totalAddedValues=9}
2025-12-18 22:24:06.733 [http-nio-8081-exec-10] ERROR com.example.servicea.controller.DemoController - traceId=51c0223e1c2dc7333abb41c1628dcd6d spanId=7a978735a10dfd86 - [A] 调用 B /error 接口发生异常，将错误返回给前端
org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 : "{"timestamp":"2025-12-18T14:24:06.731+00:00","status":500,"error":"Internal Server Error","path":"/api/b/error"}"
        at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102)
        at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:186)
        at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)
        at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
        at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:942)
        at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:891)
        at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:790)
        at org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:404)
        at com.example.servicea.controller.DemoController.error(DemoController.java:37)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:569)
        at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
        at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
        at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
        at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
        at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at com.example.servicea.filter.TraceparentEchoFilter.doFilter(TraceparentEchoFilter.java:45)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.springframework.web.servlet.v6_0.OpenTelemetryHandlerMappingFilter.doFilter(OpenTelemetryHandlerMappingFilter.java:78)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
        at java.base/java.lang.Thread.run(Thread.java:840)
[otel.javaagent 2025-12-18 22:24:06:735 +0800] [http-nio-8081-exec-10] INFO io.opentelemetry.exporter.logging.LoggingSpanExporter - 'GET /api/a/error' : 51c0223e1c2dc7333abb41c1628dcd6d f989d6f029ba3930 SERVER [tracer: io.opentelemetry.tomcat-10.0:2.23.0-alpha] AttributesMap{data={network.peer.port=64058, url.path=/api/a/error, error.type=500, network.peer.address=0:0:0:0:0:0:0:1, server.address=localhost, client.address=0:0:0:0:0:0:0:1, http.route=/api/a/error, http.request.method=GET, server.port=8081, thread.id=35, url.scheme=http, thread.name=http-nio-8081-exec-10, http.response.status_code=500, user_agent.original=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36, network.protocol.version=1.1}, capacity=128, totalAddedValues=15}
[otel.javaagent 2025-12-18 22:28:23:070 +0800] [http-nio-8081-exec-1] INFO io.opentelemetry.exporter.logging.LoggingSpanExporter - 'OPTIONS /api/a/success' : 24a6ccd21443976e06f190370ae21fa9 84648c92b31538a7 SERVER [tracer: io.opentelemetry.tomcat-10.0:2.23.0-alpha] AttributesMap{data={network.peer.port=65297, url.path=/api/a/success, network.peer.address=0:0:0:0:0:0:0:1, server.address=localhost, client.address=0:0:0:0:0:0:0:1, http.route=/api/a/success, http.request.method=OPTIONS, server.port=8081, thread.id=26, url.scheme=http, thread.name=http-nio-8081-exec-1, http.response.status_code=200, user_agent.original=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36, network.protocol.version=1.1}, capacity=128, totalAddedValues=14}
2025-12-18 22:28:23.073 [http-nio-8081-exec-2] INFO  com.example.servicea.controller.DemoController - traceId=122e10a45334443c9a6edb9ce10c5390 spanId=ded8c6ea307786ab - [A] 收到 /success 请求，准备调用 B 成功接口
[otel.javaagent 2025-12-18 22:28:23:081 +0800] [http-nio-8081-exec-2] INFO io.opentelemetry.exporter.logging.LoggingSpanExporter - 'GET' : 122e10a45334443c9a6edb9ce10c5390 00d44fe85e4481b9 CLIENT [tracer: io.opentelemetry.http-url-connection:2.23.0-alpha] AttributesMap{data={server.port=8082, thread.id=27, url.full=http://localhost:8082/api/b/success, thread.name=http-nio-8081-exec-2, http.response.status_code=200, server.address=localhost, network.protocol.version=1.1, http.request.method=GET}, capacity=128, totalAddedValues=8}
2025-12-18 22:28:23.085 [http-nio-8081-exec-2] INFO  com.example.servicea.controller.DemoController - traceId=122e10a45334443c9a6edb9ce10c5390 spanId=ded8c6ea307786ab - [A] B 成功返回，响应内容: Service B success
[otel.javaagent 2025-12-18 22:28:23:090 +0800] [http-nio-8081-exec-2] INFO io.opentelemetry.exporter.logging.LoggingSpanExporter - 'GET /api/a/success' : 122e10a45334443c9a6edb9ce10c5390 39c68cdec7dccef0 SERVER [tracer: io.opentelemetry.tomcat-10.0:2.23.0-alpha] AttributesMap{data={network.peer.port=65297, url.path=/api/a/success, network.peer.address=0:0:0:0:0:0:0:1, server.address=localhost, client.address=0:0:0:0:0:0:0:1, http.route=/api/a/success, http.request.method=GET, server.port=8081, thread.id=27, url.scheme=http, thread.name=http-nio-8081-exec-2, http.response.status_code=200, user_agent.original=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36, network.protocol.version=1.1}, capacity=128, totalAddedValues=14}
[otel.javaagent 2025-12-18 22:28:24:092 +0800] [http-nio-8081-exec-3] INFO io.opentelemetry.exporter.logging.LoggingSpanExporter - 'OPTIONS /api/a/error' : 65a0c2566b95e3789b77178b5fca8515 cce9b3d5d9db1762 SERVER [tracer: io.opentelemetry.tomcat-10.0:2.23.0-alpha] AttributesMap{data={network.peer.port=65297, url.path=/api/a/error, network.peer.address=0:0:0:0:0:0:0:1, server.address=localhost, client.address=0:0:0:0:0:0:0:1, http.route=/api/a/error, http.request.method=OPTIONS, server.port=8081, thread.id=28, url.scheme=http, thread.name=http-nio-8081-exec-3, http.response.status_code=200, user_agent.original=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36, network.protocol.version=1.1}, capacity=128, totalAddedValues=14}
2025-12-18 22:28:24.094 [http-nio-8081-exec-4] INFO  com.example.servicea.controller.DemoController - traceId=236134b37ceb65a4abdfa4f57a97dcc5 spanId=60d5925875e5b85c - [A] 收到 /error 请求，准备调用 B 错误接口
[otel.javaagent 2025-12-18 22:28:24:101 +0800] [http-nio-8081-exec-4] INFO io.opentelemetry.exporter.logging.LoggingSpanExporter - 'GET' : 236134b37ceb65a4abdfa4f57a97dcc5 be63362a4f9704db CLIENT [tracer: io.opentelemetry.http-url-connection:2.23.0-alpha] AttributesMap{data={server.port=8082, thread.id=29, url.full=http://localhost:8082/api/b/error, thread.name=http-nio-8081-exec-4, http.response.status_code=500, error.type=500, server.address=localhost, network.protocol.version=1.1, http.request.method=GET}, capacity=128, totalAddedValues=9}
2025-12-18 22:28:24.102 [http-nio-8081-exec-4] ERROR com.example.servicea.controller.DemoController - traceId=236134b37ceb65a4abdfa4f57a97dcc5 spanId=60d5925875e5b85c - [A] 调用 B /error 接口发生异常，将错误返回给前端
org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 : "{"timestamp":"2025-12-18T14:28:24.100+00:00","status":500,"error":"Internal Server Error","path":"/api/b/error"}"
        at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102)
        at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:186)
        at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)
        at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
        at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:942)
        at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:891)
        at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:790)
        at org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:404)
        at com.example.servicea.controller.DemoController.error(DemoController.java:37)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:569)
        at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
        at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
        at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
        at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
        at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at com.example.servicea.filter.TraceparentEchoFilter.doFilter(TraceparentEchoFilter.java:45)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.springframework.web.servlet.v6_0.OpenTelemetryHandlerMappingFilter.doFilter(OpenTelemetryHandlerMappingFilter.java:78)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
        at java.base/java.lang.Thread.run(Thread.java:840)
[otel.javaagent 2025-12-18 22:28:24:106 +0800] [http-nio-8081-exec-4] INFO io.opentelemetry.exporter.logging.LoggingSpanExporter - 'GET /api/a/error' : 236134b37ceb65a4abdfa4f57a97dcc5 1729573d1332639c SERVER [tracer: io.opentelemetry.tomcat-10.0:2.23.0-alpha] AttributesMap{data={network.peer.port=65297, url.path=/api/a/error, error.type=500, network.peer.address=0:0:0:0:0:0:0:1, server.address=localhost, client.address=0:0:0:0:0:0:0:1, http.route=/api/a/error, http.request.method=GET, server.port=8081, thread.id=29, url.scheme=http, thread.name=http-nio-8081-exec-4, http.response.status_code=500, user_agent.original=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36, network.protocol.version=1.1}, capacity=128, totalAddedValues=15}
2025-12-18 22:29:47.421 [http-nio-8081-exec-5] INFO  com.example.servicea.controller.DemoController - traceId=fc0cfd597ce09e46076f980cf66a4887 spanId=ac6371d97df7858f - [A] 收到 /success 请求，准备调用 B 成功接口
[otel.javaagent 2025-12-18 22:29:47:426 +0800] [http-nio-8081-exec-5] INFO io.opentelemetry.exporter.logging.LoggingSpanExporter - 'GET' : fc0cfd597ce09e46076f980cf66a4887 7dc80317e93cd447 CLIENT [tracer: io.opentelemetry.http-url-connection:2.23.0-alpha] AttributesMap{data={server.port=8082, thread.id=30, url.full=http://localhost:8082/api/b/success, thread.name=http-nio-8081-exec-5, http.response.status_code=200, server.address=localhost, network.protocol.version=1.1, http.request.method=GET}, capacity=128, totalAddedValues=8}
2025-12-18 22:29:47.426 [http-nio-8081-exec-5] INFO  com.example.servicea.controller.DemoController - traceId=fc0cfd597ce09e46076f980cf66a4887 spanId=ac6371d97df7858f - [A] B 成功返回，响应内容: Service B success
[otel.javaagent 2025-12-18 22:29:47:427 +0800] [http-nio-8081-exec-5] INFO io.opentelemetry.exporter.logging.LoggingSpanExporter - 'GET /api/a/success' : fc0cfd597ce09e46076f980cf66a4887 576712f81eb1e475 SERVER [tracer: io.opentelemetry.tomcat-10.0:2.23.0-alpha] AttributesMap{data={network.peer.port=49311, url.path=/api/a/success, network.peer.address=0:0:0:0:0:0:0:1, server.address=localhost, client.address=0:0:0:0:0:0:0:1, http.route=/api/a/success, http.request.method=GET, server.port=8081, thread.id=30, url.scheme=http, thread.name=http-nio-8081-exec-5, http.response.status_code=200, user_agent.original=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36, network.protocol.version=1.1}, capacity=128, totalAddedValues=14}
2025-12-18 22:30:21.745 [http-nio-8081-exec-6] INFO  com.example.servicea.controller.DemoController - traceId=02a43ad2b78891693add62989f7892d5 spanId=75ccb015dd465ad0 - [A] 收到 /error 请求，准备调用 B 错误接口
[otel.javaagent 2025-12-18 22:30:21:750 +0800] [http-nio-8081-exec-6] INFO io.opentelemetry.exporter.logging.LoggingSpanExporter - 'GET' : 02a43ad2b78891693add62989f7892d5 72c4fa4210636c0f CLIENT [tracer: io.opentelemetry.http-url-connection:2.23.0-alpha] AttributesMap{data={server.port=8082, thread.id=31, url.full=http://localhost:8082/api/b/error, thread.name=http-nio-8081-exec-6, http.response.status_code=500, error.type=500, server.address=localhost, network.protocol.version=1.1, http.request.method=GET}, capacity=128, totalAddedValues=9}
2025-12-18 22:30:21.753 [http-nio-8081-exec-6] ERROR com.example.servicea.controller.DemoController - traceId=02a43ad2b78891693add62989f7892d5 spanId=75ccb015dd465ad0 - [A] 调用 B /error 接口发生异常，将错误返回给前端
org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 : "{"timestamp":"2025-12-18T14:30:21.749+00:00","status":500,"error":"Internal Server Error","path":"/api/b/error"}"
        at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102)
        at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:186)
        at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)
        at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
        at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:942)
        at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:891)
        at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:790)
        at org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:404)
        at com.example.servicea.controller.DemoController.error(DemoController.java:37)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:569)
        at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
        at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
        at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
        at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
        at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at com.example.servicea.filter.TraceparentEchoFilter.doFilter(TraceparentEchoFilter.java:45)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.springframework.web.servlet.v6_0.OpenTelemetryHandlerMappingFilter.doFilter(OpenTelemetryHandlerMappingFilter.java:78)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
        at java.base/java.lang.Thread.run(Thread.java:840)
[otel.javaagent 2025-12-18 22:30:21:757 +0800] [http-nio-8081-exec-6] INFO io.opentelemetry.exporter.logging.LoggingSpanExporter - 'GET /api/a/error' : 02a43ad2b78891693add62989f7892d5 654277f3b9bba792 SERVER [tracer: io.opentelemetry.tomcat-10.0:2.23.0-alpha] AttributesMap{data={network.peer.port=49311, url.path=/api/a/error, error.type=500, network.peer.address=0:0:0:0:0:0:0:1, server.address=localhost, client.address=0:0:0:0:0:0:0:1, http.route=/api/a/error, http.request.method=GET, server.port=8081, thread.id=31, url.scheme=http, thread.name=http-nio-8081-exec-6, http.response.status_code=500, user_agent.original=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36, network.protocol.version=1.1}, capacity=128, totalAddedValues=15}
